<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="icon" href="plugins/images/fav.png">
    <link href="plugins/css/reset.css" rel="stylesheet">
    <link href="plugins/ar/bootstrap-4.0.0-rtl-dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="plugins/fontawesome-free-5.6.3-web/fontawesome-free-5.6.3-web/css/all.min.css" rel="stylesheet"
        type="text/css" />
    <link href="plugins/css/style.css" rel="stylesheet">
    <title>Secret Office</title>
    <script src="plugins/js/jquery-3.4.1.min.js"></script>
    <script src="plugins/js/popper.min.js"></script>
</head>

<body>
    <div class="loader">
        <div>
            <i class="fas fa-spinner text-secondary fa-spin fa-3x"></i>
        </div>
    </div>
    <!--Header -->
    <div class=" container logcontainer">
        <div class="row">
            <div class="col-md-4 pt-5">
                <div class="row">
                    <img src="plugins/images/logos.png" width="200px" class="mx-auto">
                </div>
                <div class="card my-3">
                    <div class="card-body">

                        <button class="btn btn-link btn-lang" id="btnLang"></button>
                        <h4 class="card-title text-center" id="signPageTitle">تسجيل</h4>
                        <label class='error d-none w-100 text-center' id="userOrPassword">password is required</label>
                        <form id="loginForm" class="mt-5" action="authenticateUser" method="POST">
                            <div class="input-group mb-2">
                                <div class="input-group-prepend">
                                    <div class="input-group-text"><i class="fas fa-user"></i></div>
                                </div>
                                <input type="text" id="username" name="username" class="form-control"
                                    id="inlineFormInputGroup" placeholder="Username">

                            </div>
                            <label class='error d-none' id="usernameValidate">userName is required</label>
                            <div class="input-group mb-2">
                                <div class="input-group-prepend">
                                    <div class="input-group-text"><i class="fas fa-lock"></i></div>
                                </div>
                                <input type="password" id="password" name="password" class="form-control"
                                    id="inlineFormInputGroup" placeholder="password">
                            </div>
                            <label class='error d-none' id="passwordValidate">password is required</label>

                            <div class="input-group mb-2">

                                <button type="submit" class="btn btn-secondary w-100" id="signInBtn">تسجيل دخول</button>
                            </div>
                            <div class="row d-flex justify-content-around">
                                <!--                                <div class="form-group form-check">
                                        <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                        <label class="form-check-label" id="remrmberMe" for="exampleCheck1">تذكرني</label>
                                </div>-->
                                <div class="form-group">
                                    <button type="button" class="btn btn-link" id="forgetPass" data-toggle="modal"
                                        data-target="#forgetPassModal">نسيت كلمة المرور</button>
                                </div>
                            </div>
                        </form>


                    </div>
                </div>
            </div>
        </div>
        <!--Add user Form-->
    </div>

    <!---Footer-->

    <hr />
    <div class="container-fluid footer-class">
        <div class="container">
            <div class="row">
                <div class="col-md-4">

                </div>
                <div class="col-md-4 text-center">Powerd By <img src="plugins/images/TSS_Logo-1.png" width="50"></div>
                <div class="col-md-4">
                    <ul class="footer-links float-right" id="footerLinks">
                        <!-- <li><a href="#">????????</a></li>
                                        <li><a href="#">English</a></li> -->
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!--Decrypt-->
    <div class="modal fade" id="forgetPassModal" tabindex="-1" role="dialog" aria-labelledby="decryptFiles"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-info" id="resetPassTitle">Decrypt a File</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="resetPassForm">
                    <div class="form-group col-md-10 mx-auto text-center">
                   
                        <input name="reaetEmail" id="reaetEmail" type="email" class="form-control" required />

                    </div>
                    <div class="row">
                    <button type="submit" class="btn btn-secondary my-3 mx-auto" id="resetPassBtn">zxsd</button>
                </div>
                </form>

                </div>

            </div>
        </div>
    </div>

  
    
    <div class="feed-back opacity" id="feedBack">
            <i id="feedBackIcon" class=" fa-3x"></i>
            <p>رسالة</p>
            <button class="btn btn-danger mx-auto" onclick="hideMessage()"> OK </button>
        </div>

    <!-- scripts -->
    
    
    <!-- scripts -->
    <script src="plugins/js/jquery-3.4.1.min.js"></script>
    <script src="plugins/js/popper.min.js"></script>
    <script src="plugins/ar/bootstrap-4.0.0-rtl-dist/js/bootstrap.min.js"></script>
    <script src="plugins/js/myscript.js"></script>
    <script src="plugins/js/jquery.validate.min.js"></script>
    <script id="arMessages" src="plugins/ar/messages_ar.min.js"></script>
    <script>
        $(document).ready(function(){
            readData()
        })
        readData()
        

        $("#username").change(function(){
            $("#usernameValidate").addClass("d-none").removeClass("d-block");
        })

        $("#password").change(function(){
            $("#passwordValidate").addClass("d-none").removeClass("d-block");
        })


        $("#loginForm").submit(function (e) {
            // e.preventDefault()
            let userNameLogs = $("#username").val();
            let passwordLogs = $("#password").val();
            if (userNameLogs === "") {
                $("#usernameValidate").removeClass("d-none").addClass("d-block")
                return false
            }else{
                $("#usernameValidate").addClass("d-none").removeClass("d-block")
            }

            if (passwordLogs === "") {
                $("#passwordValidate").removeClass("d-none").addClass("d-block")
                return false
            }else{
                $("#passwordValidate").addClass("d-none").removeClass("d-block")
            }
            // $("#username").parent().siblings("label.error").addClass("d-none").removeClass("d-block");
            // $("#password").parent().siblings("label.error").removeClass("d-block").addClass("d-none")

            if(userNameLogs !== "admin" && passwordLogs !=="admin"){
                $("#userOrPassword").removeClass("d-none")
                return false
            }else{
                $("#userOrPassword").addClass("d-none")
                return true
            }
            
        })

       
        $("#resetPassForm").validate();
        $("#resetPassForm").submit(function (e) {
            e.preventDefault()
            if ($("#resetPassForm").valid()) {
                $.ajax({
                    url: "profile/resetmypassword-request.go?email=" + $("#reaetEmail").val(),
                    type: "GET",
                    dataType: 'json',
                    success: function (result) {
                        var status = result.status;
                        $('#forgetPassModal').modal('toggle');
                        showMessage(status,result.message)
                    }, error: function (result) {
                        var status = result.status;
                        $('#forgetPassModal').modal('toggle');
                        if (status == 404){
                            showMessage(false,"تعذر الوصول للموقع")
                        }
                    }
                });

            }else{
                return false
            }
        })
    </script>

</body>

</html>